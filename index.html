<!doctype html><html lang='es'><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'><title>Mis Ventas</title><link rel="manifest" href="manifest.webmanifest"><style>
        :root{--bg:#eef0f4;--surface:#fff;--text:#0b1220;--border:#E5E7EB;--btn:#000;--btnText:#fff}
        [data-theme="dark"]{--bg:#0b1220;--surface:#0f172a;--text:#eef0f4;--border:#1f2937;--btn:#007BFF;--btnText:#fff}
        body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
        .btn{background:var(--btn);color:var(--btnText);border:2px solid var(--btn);padding:10px 14px;border-radius:999px;font-weight:800}
        .card{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:14px;margin:12px}
        .picker{display:flex;justify-content:space-between;align-items:center;border:1px solid var(--border);border-radius:12px;padding:12px;background:var(--surface);cursor:pointer}
        .sheet{position:fixed;left:0;right:0;bottom:0;background:var(--surface);border-top-left-radius:16px;border-top-right-radius:16px;max-height:70vh;transform:translateY(100%);transition:.25s;border:1px solid var(--border)}
        .sheet.open{transform:translateY(0)} .sheet .body{padding:8px 14px 16px;overflow:auto;max-height:60vh}
        .sheet .search{position:sticky;top:0;background:var(--surface);padding-bottom:8px}
        .sheet .search input{width:100%;padding:12px;border:1px solid var(--border);border-radius:12px;background:var(--surface);color:var(--text)}
        .sheet .item{display:flex;align-items:center;justify-content:space-between;padding:12px;border:1px solid var(--border);border-radius:12px;margin-bottom:8px}
        </style></head><body>
        <div class='card'><div class='picker' onclick='openPicker()'><span id='pickerLabel'>Elegir producto</span><span>▼</span></div></div>
        <div id='backdrop' style='position:fixed;inset:0;background:rgba(0,0,0,.35);display:none'></div>
        <div class='sheet' id='sheet'><div class='body' id='sheetBody'></div></div>
        <script>
        const $=id=>document.getElementById(id);
        function openPicker(){ $('sheet').classList.add('open'); $('backdrop').style.display='block'; renderPickerList(); }
        function closePicker(){ $('sheet').classList.remove('open'); $('backdrop').style.display='none'; }
        $('backdrop').onclick=closePicker;
        const store={ get(k,def){ try{return JSON.parse(localStorage.getItem(k))??def}catch{return def} }, set(k,v){ localStorage.setItem(k, JSON.stringify(v)); } };
        if(!store.get('productos')) store.set('productos',[{id:'1',nombre:'Azúcar 1kg',precio:1200},{id:'2',nombre:'Arroz 1kg',precio:1500},{id:'3',nombre:'Aceite 1L',precio:3800},{id:'4',nombre:'Fideos 400g',precio:900},{id:'5',nombre:'Leche 1L',precio:1100}]);
        function stripAccents(s){return (s||'').normalize('NFD').replace(/[\u0300-\u036f]/g,'');}
        function renderPickerList(){
          const cont=$('sheetBody'); cont.innerHTML='';
          const header=document.createElement('div'); header.className='search'; header.innerHTML=`<input id="sheetSearch" placeholder="Buscar producto..." autofocus />`; cont.appendChild(header);
          const listWrap=document.createElement('div'); cont.appendChild(listWrap);
          function render(q=''){
            listWrap.innerHTML='';
            const qn=stripAccents((q||'').toLowerCase());
            const productos=(store.get('productos',[])||[]).sort((a,b)=>a.nombre.localeCompare(b.nombre)).filter(p=>stripAccents(p.nombre).toLowerCase().includes(qn));
            for(const p of productos){
              const row=document.createElement('div'); row.className='item';
              row.innerHTML=`<div><div style="font-weight:800">${p.nombre}</div><div style="opacity:.7">$${p.precio.toLocaleString('es-CL')}</div></div><button class='btn' onclick="alert('Agregar '+p.nombre)">Agregar</button>`;
              listWrap.appendChild(row);
            }
          }
          render('');
          $('sheetSearch').addEventListener('input', e=>render(e.target.value||''), {passive:true});
        }
        </script></body></html>